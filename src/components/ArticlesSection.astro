---
import { pagesMap } from '../configs/pages';
import type { PageId } from '../enums/page-id';
import { constructUrl } from '../helpers/construct-url';
import { getArticles } from '../helpers/get-articles';
import Card from './Card.astro';
import Grid from './Grid.astro';
import SectionLink from './SectionLink.astro';

type Props = {
  rootId: PageId;
}

const { rootId } = Astro.props;

const config = pagesMap[rootId];

const articles = await getArticles({ collectionName: rootId, limit: 8 });

---

<div class="section">
  <h2 class="section-title">
    <span>{config.emoji}</span>
    <span>{config.title}</span>
  </h2>
  <Grid>
    {articles.map(article => (
      <Card url={constructUrl(config.id, article.slug)} shouldShowDate={config.shouldShowDate} title={article.data.title} description={article.data.description} date={article.data.date} />
    ))}
  </Grid>
  <SectionLink path={constructUrl(config.id)}>
    Всі {config.shortTitle}
  </SectionLink>
</div>

<style>
.section {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-bottom: 30px;
}

.section:last-child {
  margin-bottom: 0;
}

.section-title {
  display: flex;
  gap: 5px;
  font-size: 35px;
}

@media (max-width: 700px) {
  .section-title {
    font-size: 28px;
  }
}

@media (max-width: 580px) {
  .section-title {
    flex-direction: column;
    text-align: center;
  }
}
</style>
